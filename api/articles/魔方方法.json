{"title":"魔方方法","uid":"41e4c04fb0b46d8edf1df16b771f642e","slug":"魔方方法","date":"2026-01-03T07:10:49.000Z","updated":"2026-01-03T07:22:34.583Z","comments":true,"path":"api/articles/魔方方法.json","keywords":"AI、Python","cover":null,"content":"<h1 id=\"魔方方法\"><a href=\"#魔方方法\" class=\"headerlink\" title=\"魔方方法\"></a>魔方方法</h1><h2 id=\"什么是魔方方法\"><a href=\"#什么是魔方方法\" class=\"headerlink\" title=\"什么是魔方方法\"></a>什么是魔方方法</h2><p>Python 的魔法方法是以双下划线命名的特殊方法，它们定义了对象在 Python 语法下的行为， 让自定义对象能够像内置类型一样使用。</p>\n<p>当使用像 <code>+</code>、<code>len()</code>、<code>str()</code>、<code>in</code>、<code>[]</code> 等语法时，Python 其实是在背后调用对应的魔法方法。</p>\n<h2 id=\"常见魔法方法举例\"><a href=\"#常见魔法方法举例\" class=\"headerlink\" title=\"常见魔法方法举例\"></a>常见魔法方法举例</h2><h3 id=\"init-：初始化对象\"><a href=\"#init-：初始化对象\" class=\"headerlink\" title=\"__init__：初始化对象\"></a><code>__init__</code>：初始化对象</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Person:</span><br><span class=\"line\">    def __init__(self, name):</span><br><span class=\"line\">        self.name = name</span><br><span class=\"line\"></span><br><span class=\"line\">p = Person(&quot;Alice&quot;)  # 调用 __init__</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"str-和-repr-：控制对象的字符串表示\"><a href=\"#str-和-repr-：控制对象的字符串表示\" class=\"headerlink\" title=\"__str__ 和 __repr__：控制对象的字符串表示\"></a><code>__str__</code> 和 <code>__repr__</code>：控制对象的字符串表示</h3><ul>\n<li><code>__str__</code> 用于 <code>str(obj)</code> 或 <code>print(obj)</code>，面向用户。</li>\n<li><code>__repr__</code> 用于调试，面向开发者，通常返回可执行的代码字符串。</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Point:</span><br><span class=\"line\">    def __init__(self, x, y):</span><br><span class=\"line\">        self.x = x</span><br><span class=\"line\">        self.y = y</span><br><span class=\"line\"></span><br><span class=\"line\">    def __str__(self):</span><br><span class=\"line\">        return f&quot;Point(&#123;self.x&#125;, &#123;self.y&#125;)&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">    def __repr__(self):</span><br><span class=\"line\">        return f&quot;Point(x=&#123;self.x&#125;, y=&#123;self.y&#125;)&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">p = Point(1, 2)</span><br><span class=\"line\">print(p)        # Point(1, 2) ← 调用 __str__</span><br><span class=\"line\">print(repr(p))  # Point(x=1, y=2) ← 调用 __repr__</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"len-：支持-len-obj\"><a href=\"#len-：支持-len-obj\" class=\"headerlink\" title=\"__len__：支持 len(obj)\"></a><code>__len__</code>：支持 <code>len(obj)</code></h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class MyList:</span><br><span class=\"line\">    def __init__(self, items):</span><br><span class=\"line\">        self.items = items</span><br><span class=\"line\"></span><br><span class=\"line\">    def __len__(self):</span><br><span class=\"line\">        return len(self.items)</span><br><span class=\"line\"></span><br><span class=\"line\">my_list = MyList([1, 2, 3])</span><br><span class=\"line\">print(len(my_list))  # 3</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"getitem-setitem-：支持-obj-key-和-obj-key-value\"><a href=\"#getitem-setitem-：支持-obj-key-和-obj-key-value\" class=\"headerlink\" title=\"__getitem__ &#x2F; __setitem__：支持 obj[key] 和 obj[key] = value\"></a><code>__getitem__</code> &#x2F; <code>__setitem__</code>：支持 <code>obj[key]</code> 和 <code>obj[key] = value</code></h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Vector:</span><br><span class=\"line\">    def __init__(self, data):</span><br><span class=\"line\">        self.data = data</span><br><span class=\"line\"></span><br><span class=\"line\">    def __getitem__(self, index):</span><br><span class=\"line\">        return self.data[index]</span><br><span class=\"line\"></span><br><span class=\"line\">    def __setitem__(self, index, value):</span><br><span class=\"line\">        self.data[index] = value</span><br><span class=\"line\"></span><br><span class=\"line\">v = Vector([10, 20, 30])</span><br><span class=\"line\">print(v[1])      # 20</span><br><span class=\"line\">v[1] = 99</span><br><span class=\"line\">print(v[1])      # 99</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-：支持-运算符\"><a href=\"#add-：支持-运算符\" class=\"headerlink\" title=\"__add__：支持 + 运算符\"></a><code>__add__</code>：支持 <code>+</code> 运算符</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Vector:</span><br><span class=\"line\">    def __init__(self, x, y):</span><br><span class=\"line\">        self.x = x</span><br><span class=\"line\">        self.y = y</span><br><span class=\"line\"></span><br><span class=\"line\">    def __add__(self, other):</span><br><span class=\"line\">        return Vector(self.x + other.x, self.y + other.y)</span><br><span class=\"line\"></span><br><span class=\"line\">    def __repr__(self):</span><br><span class=\"line\">        return f&quot;Vector(&#123;self.x&#125;, &#123;self.y&#125;)&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">v1 = Vector(1, 2)</span><br><span class=\"line\">v2 = Vector(3, 4)</span><br><span class=\"line\">print(v1 + v2)  # Vector(4, 6)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"eq-：支持-比较\"><a href=\"#eq-：支持-比较\" class=\"headerlink\" title=\"__eq__：支持 == 比较\"></a><code>__eq__</code>：支持 <code>==</code> 比较</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Book:</span><br><span class=\"line\">    def __init__(self, title):</span><br><span class=\"line\">        self.title = title</span><br><span class=\"line\"></span><br><span class=\"line\">    def __eq__(self, other):</span><br><span class=\"line\">        return self.title == other.title</span><br><span class=\"line\"></span><br><span class=\"line\">b1 = Book(&quot;Python&quot;)</span><br><span class=\"line\">b2 = Book(&quot;Python&quot;)</span><br><span class=\"line\">print(b1 == b2)  # True</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"call-：让对象像函数一样被调用\"><a href=\"#call-：让对象像函数一样被调用\" class=\"headerlink\" title=\"__call__：让对象像函数一样被调用\"></a><code>__call__</code>：让对象像函数一样被调用</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Multiplier:</span><br><span class=\"line\">    def __init__(self, factor):</span><br><span class=\"line\">        self.factor = factor</span><br><span class=\"line\"></span><br><span class=\"line\">    def __call__(self, x):</span><br><span class=\"line\">        return x * self.factor</span><br><span class=\"line\"></span><br><span class=\"line\">double = Multiplier(2)</span><br><span class=\"line\">print(double(5))  # 10</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h2><p><a href=\"https://www.bilibili.com/video/BV1vx421D7AP/?spm_id_from=333.788.videopod.sections&vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11\">【Python 特性】魔法方法：让你的类和原生类一样顺滑_哔哩哔哩_bilibili</a></p>\n","feature":true,"text":"魔方方法什么是魔方方法Python 的魔法方法是以双下划线命名的特殊方法，它们定义了对象在 Python 语法下的行为， 让自定义对象能够像内置类型一样使用。 ...","permalink":"/post/魔方方法","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"python","slug":"python","count":5,"path":"api/categories/python.json"}],"tags":[{"name":"python","slug":"python","count":7,"path":"api/tags/python.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%AD%94%E6%96%B9%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">魔方方法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AF%E9%AD%94%E6%96%B9%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">什么是魔方方法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E8%A7%81%E9%AD%94%E6%B3%95%E6%96%B9%E6%B3%95%E4%B8%BE%E4%BE%8B\"><span class=\"toc-text\">常见魔法方法举例</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#init-%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">__init__：初始化对象</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#str-%E5%92%8C-repr-%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%A1%A8%E7%A4%BA\"><span class=\"toc-text\">__str__ 和 __repr__：控制对象的字符串表示</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#len-%EF%BC%9A%E6%94%AF%E6%8C%81-len-obj\"><span class=\"toc-text\">__len__：支持 len(obj)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#getitem-setitem-%EF%BC%9A%E6%94%AF%E6%8C%81-obj-key-%E5%92%8C-obj-key-value\"><span class=\"toc-text\">__getitem__ &#x2F; __setitem__：支持 obj[key] 和 obj[key] &#x3D; value</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#add-%EF%BC%9A%E6%94%AF%E6%8C%81-%E8%BF%90%E7%AE%97%E7%AC%A6\"><span class=\"toc-text\">__add__：支持 + 运算符</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#eq-%EF%BC%9A%E6%94%AF%E6%8C%81-%E6%AF%94%E8%BE%83\"><span class=\"toc-text\">__eq__：支持 &#x3D;&#x3D; 比较</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#call-%EF%BC%9A%E8%AE%A9%E5%AF%B9%E8%B1%A1%E5%83%8F%E5%87%BD%E6%95%B0%E4%B8%80%E6%A0%B7%E8%A2%AB%E8%B0%83%E7%94%A8\"><span class=\"toc-text\">__call__：让对象像函数一样被调用</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99\"><span class=\"toc-text\">参考资料</span></a></li></ol></li></ol>","author":{"name":"GuoLiangWei","slug":"blog-author","avatar":"/img/logo.jpg","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>心照不宣</span>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/github.svg","link":"https://github.com/guoliangwei2025"},"qq":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/tencentqq.svg","link":"https://wpa.qq.com/msgrd?v=3&uin=2691160140&site=qq&menu=yes"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"python项目结构","uid":"632f210d03c73a171aabb82facfe9a17","slug":"python项目结构","date":"2026-01-03T07:23:41.000Z","updated":"2026-01-03T08:19:43.257Z","comments":true,"path":"api/articles/python项目结构.json","keywords":"AI、Python","cover":null,"text":"Python 项目结构和打包pip install 的本质从 PyPI（默认）或其他源（如私有仓库、本地文件）查找指定名称的包，下载对应的.whl 文件 whl...","permalink":"/post/python项目结构","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"python","slug":"python","count":5,"path":"api/categories/python.json"}],"tags":[{"name":"python","slug":"python","count":7,"path":"api/tags/python.json"}],"author":{"name":"GuoLiangWei","slug":"blog-author","avatar":"/img/logo.jpg","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>心照不宣</span>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/github.svg","link":"https://github.com/guoliangwei2025"},"qq":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/tencentqq.svg","link":"https://wpa.qq.com/msgrd?v=3&uin=2691160140&site=qq&menu=yes"}}}},"feature":true},"next_post":{"title":"python-GIL","uid":"7c92a90719ee3ce55cb3de2f938af8f9","slug":"python-GIL","date":"2026-01-03T06:08:14.000Z","updated":"2026-01-03T06:54:04.882Z","comments":true,"path":"api/articles/python-GIL.json","keywords":"AI、Python","cover":null,"text":"GILGIL是什么GIL 是 CPython 为了简化内存管理而引入的全局解释器锁，它保证同一时间只有一个线程执行 Python 字节码。这使得 Python ...","permalink":"/post/python-GIL","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"python","slug":"python","count":5,"path":"api/categories/python.json"}],"tags":[{"name":"python","slug":"python","count":7,"path":"api/tags/python.json"}],"author":{"name":"GuoLiangWei","slug":"blog-author","avatar":"/img/logo.jpg","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>心照不宣</span>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/github.svg","link":"https://github.com/guoliangwei2025"},"qq":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/tencentqq.svg","link":"https://wpa.qq.com/msgrd?v=3&uin=2691160140&site=qq&menu=yes"}}}},"feature":true}}