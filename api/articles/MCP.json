{"title":"MCP","uid":"0cec45348c42060a94488bf44a5c4b6b","slug":"MCP","date":"2025-08-28T06:21:20.000Z","updated":"2025-09-07T11:02:28.410Z","comments":true,"path":"api/articles/MCP.json","keywords":"AIã€Python","cover":[],"content":"<h1 id=\"MCP\"><a href=\"#MCP\" class=\"headerlink\" title=\"MCP\"></a>MCP</h1><h1 id=\"Function-call\"><a href=\"#Function-call\" class=\"headerlink\" title=\"Function call\"></a>Function call</h1><table>\n<thead>\n<tr>\n<th>ç»´åº¦</th>\n<th>Function Callingï¼ˆFCï¼‰</th>\n<th>MCPï¼ˆModel Context Protocolï¼‰</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>æœ¬è´¨</td>\n<td><strong>èƒ½åŠ›</strong> â€”â€” æŸä¸ªå¤§æ¨¡å‹åŸç”Ÿå°±å¸¦çš„ä¸€ç§ã€Œè°ƒç”¨å‡½æ•°ã€åŠŸèƒ½</td>\n<td><strong>åè®®</strong> â€”â€” å®šä¹‰ AI ä¸å¤–éƒ¨ä¸–ç•Œå¦‚ä½•é•¿æœŸã€æ ‡å‡†ã€å¯å¤ç”¨åœ°äº¤äº’</td>\n</tr>\n<tr>\n<td>å·¥ä½œæ–¹å¼</td>\n<td>æ¨¡å‹åœ¨ä¸€æ¬¡æ¨ç†é‡Œ<strong>ä¸»åŠ¨</strong>å†³å®šè¦è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œå¹¶åå‡ºç»“æ„åŒ–å‚æ•°</td>\n<td>é€šè¿‡ã€Œå®¢æˆ·ç«¯ - æœåŠ¡å™¨ã€æ¶æ„ï¼Œç”± MCP Server <strong>è¢«åŠ¨</strong>ç­‰å¾…æ¨¡å‹æˆ– Agent çš„è¯·æ±‚</td>\n</tr>\n<tr>\n<td>æ˜¯å¦æ ‡å‡†åŒ–</td>\n<td>å¦ã€‚OpenAIã€Anthropicã€ç™¾åº¦ç­‰å„å®¶æ¥å£æ ¼å¼ä¸åŒ</td>\n<td>æ˜¯ã€‚ç»Ÿä¸€ JSON-RPC 2.0 åè®®ï¼Œè·¨æ¨¡å‹é€šç”¨</td>\n</tr>\n<tr>\n<td>ä¸Šä¸‹æ–‡ç®¡ç†</td>\n<td>å•æ¬¡è°ƒç”¨ï¼Œæ— çŠ¶æ€ï¼›å¤æ‚å¤šè½®ä»»åŠ¡éœ€è‡ªå·±ç»´æŠ¤</td>\n<td>åè®®å±‚é¢æ”¯æŒä¼šè¯ã€çŠ¶æ€ã€é•¿é“¾è·¯ä»»åŠ¡</td>\n</tr>\n<tr>\n<td>å¤ç”¨ &#x2F; å…±äº«</td>\n<td>å‡½æ•°ä»£ç å¾€å¾€ç´§è€¦åˆåœ¨é¡¹ç›®é‡Œï¼Œæ¢æ¨¡å‹å°±å¾—é‡å†™</td>\n<td>ä¸€æ¬¡å†™æˆ MCP Serverï¼Œå¯è¢«ä»»ä½•æ”¯æŒ MCP çš„æ¨¡å‹ &#x2F; IDE&#x2F;Agent ç›´æ¥æ’ç”¨</td>\n</tr>\n</tbody></table>\n<h1 id=\"MCPä»‹ç»\"><a href=\"#MCPä»‹ç»\" class=\"headerlink\" title=\"MCPä»‹ç»\"></a>MCPä»‹ç»</h1><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ç®€å•æ¥è¯´ MCPå°±æ˜¯è®©å¤§æ¨¡å‹ä½¿ç”¨å„ç±»å·¥å…·çš„åè®®</p>\n<p>MCP &#x3D; åŒæ–¹äº¤æµçš„â€œå…±åŒè¯­è¨€&#x2F;åè®®â€     æŒ‡çš„å°±æ˜¯ç¯å¢ƒ ç¯å¢ƒå°±æ˜¯æŒ‡å‘¨å›´æœ‰å“ªäº›å‡½æ•°å¯ä»¥ç”¨æ¥è°ƒç”¨  ä»è€Œè·å–åˆ°å¤–ç•Œçš„ä¿¡æ¯ æ¯”å¦‚è·å–å¤©æ°”ä¿¡æ¯ ç½‘ç»œä¿¡æ¯ç­‰ç­‰ MCPå°±æ˜¯è®©æ¨¡å‹æ„ŸçŸ¥ä¸Šä¸‹æ–‡çš„åè®® ç®€ç§°æ¨¡å‹ä¸Šä¸‹æ–‡åè®® </p></blockquote>\n<p><strong>MCP server</strong>ï¼šå…¶å®å°±æ˜¯ä¸€ä¸ªã€Œå†™å¥½çš„å·¥å…·&#x2F;ç¨‹åºã€ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª NPM åŒ…æˆ–è€…è„šæœ¬ã€‚</p>\n<p><strong>MCP client</strong>ï¼ˆæ¯”å¦‚ IDE æ’ä»¶ã€AI åŠ©æ‰‹ï¼‰ï¼šå®ƒä¸ä¼šè‡ªå·±å®ç°åŠŸèƒ½ï¼Œè€Œæ˜¯é€šè¿‡ <strong>å¯åŠ¨ä½ æœ¬åœ°çš„ MCP server</strong> æ¥è·å¾—èƒ½åŠ›ã€‚</p>\n<p><strong>æ‰§è¡Œæ–¹å¼</strong>ï¼šserver å°±æ˜¯ä¸€ä¸ªæœ¬åœ°è¿›ç¨‹ï¼Œæœ¬è´¨å°±æ˜¯è¿è¡Œå‘½ä»¤ï¼ˆ<code>node</code>ã€<code>python</code>ã€<code>npx</code> ç­‰ç­‰ï¼‰ï¼Œç„¶åé€šè¿‡ <strong>æ ‡å‡†è¾“å…¥&#x2F;è¾“å‡º (stdin&#x2F;stdout)</strong> ç”¨ MCP åè®®é€šä¿¡ã€‚</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>MCP server ä¸æ˜¯è¿œç¨‹æœåŠ¡ï¼Œè€Œæ˜¯æœ¬åœ°æ‰§è¡Œçš„å·¥å…·ï¼Œåªæ˜¯ç”¨ MCP åè®®æ ‡å‡†åŒ–äº†â€œå¦‚ä½•è·Ÿè¿™äº›å·¥å…·è¯´è¯â€ã€‚</p>\n<p>MCP  Serveræ˜¯ä¸€ä¸ªç¨‹åº ç¨‹åºçš„æ‰§è¡Œç¬¦åˆMCPåè®®</p>\n<p>npxï¼šä¸´æ—¶æ‹‰å– npm åŒ…åˆ°æœ¬åœ°ç¼“å­˜ â†’ æ‰§è¡Œ â†’ ä¸ä¼šé©¬ä¸Šåˆ ï¼Œä½†ç¼“å­˜ä¼šç®¡ç†ã€‚</p></blockquote>\n<img src=\"/post/MCP/d891d54c6520407788add7e49228acf3.png\" class=\"\" title=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\">\n\n<p>å¦‚æœåŒæ—¶é…ç½®äº†å¤šä¸ªMCPæœåŠ¡ï¼Œæ¯”å¦‚ç™¾åº¦åœ°å›¾ã€Unityã€Blenderç­‰ã€‚æ¯ä¸ªMCPæœåŠ¡éœ€è¦å¯¹åº”Hostä¸­çš„ä¸€ä¸ªClientæ¥ä¸€å¯¹ä¸€é€šä¿¡ã€‚Clientè¢«åŒ…å«åœ¨Hostä¸­ã€‚</p>\n<img src=\"/post/MCP/4ab0e06f929745048b179d71fcfd9b56.png\" class=\"\" title=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\">\n\n<p>æ¯ä¸ªæ”¯æŒMCPçš„è½¯ä»¶ï¼Œéƒ½æœ‰ä¸€ä¸ªMCP Serveræ–‡ä»¶ï¼Œé‡Œé¢åˆ—å‡ºäº†æ‰€æœ‰æ”¯æŒè°ƒç”¨çš„å‡½æ•°ï¼Œå‡½æ•°æ³¨é‡Šé‡Œçš„å†…å®¹æ˜¯ç»™AIçœ‹çš„ï¼Œå‘Šè¯‰AIè¿™ä¸ªå‡½æ•°æ˜¯åšä»€ä¹ˆç”¨çš„ã€‚<br><code>MCP Serveræ–‡ä»¶å°±æ˜¯ç»™AIçœ‹çš„å·¥å…·è¯´æ˜ä¹¦ã€‚</code></p>\n<h1 id=\"MCPäº¤äº’è¿‡ç¨‹\"><a href=\"#MCPäº¤äº’è¿‡ç¨‹\" class=\"headerlink\" title=\"MCPäº¤äº’è¿‡ç¨‹\"></a>MCPäº¤äº’è¿‡ç¨‹</h1><p>MCPäº¤äº’è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>\n<p>â‘ clineä¸MCP server è¿›è¡Œå¯’æš„    å¯’æš„ç»“æŸåï¼Œclineå°±çŸ¥é“MCP serverä¸­æœ‰å“ªäº›å·¥å…·</p>\n<p>â‘¡ç”¨æˆ·æå‡ºé—®é¢˜å  clineæ¥æ”¶åˆ°é—®é¢˜  å°†é—®é¢˜ä¸æ³¨å†Œå¥½çš„MCP server ä»¥åŠserverä¸­çš„å·¥å…·åˆ—è¡¨ å‘Šè¯‰ç»™æ¨¡å‹ </p>\n<p>â‘¢æ¨¡å‹æ— æ³•å›ç­”å½“å‰é—®é¢˜  ä½†æ˜¯MCPä¸­æœ‰ç›¸åº”çš„å·¥å…·å¯ä»¥è°ƒç”¨ äºæ˜¯å‘Šè¯‰cline æƒ³è°ƒç”¨MCPä¸­çš„å·¥å…·</p>\n<p>â‘£clineæ¥å—åˆ°è¯·æ±‚å  å°±è·Ÿå¯¹åº”çš„MCP serveræ²Ÿé€š  å¯¹åº”çš„MCP server æ¥æ”¶åˆ°è¯·æ±‚å è°ƒç”¨å¯¹åº”çš„å·¥å…· è¿”å›ç›¸å…³çš„ç»“æœ</p>\n<p>ç„¶åMCP server å°†ç»“æœè¿”å›ç»™ cline clineä¼ ç»™å¤§æ¨¡å‹</p>\n<p>â‘¤æ¨¡å‹æ¥æ”¶åˆ°å›ç­”åï¼Œå°†ç»“æœè¿”å›ä¸ºclineï¼Œclineå†å°†ç»“æœè¿”å›ç»™ç”¨æˆ·</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>MCP è¿‡ç¨‹çš„äº¤äº’åªæ¶‰åŠMCP Server å’Œclineçš„äº¤äº’  ä¸æ¶‰åŠè·Ÿå¤§æ¨¡å‹ä¹‹é—´çš„äº¤äº’  MCPæ²¡æœ‰è§„å®šå¦‚ä½•ä¸æ¨¡å‹è¿›è¡Œäº¤äº’</p>\n<p>MCPåè®®ä¸»è¦è§„å®šäº†  â‘ æ¯ä¸ªMCP  Server æœ‰å“ªäº›å‡½æ•°å¯ä»¥ç”¨  â‘¡å¦‚ä½•è°ƒç”¨è¿™äº›å‡½æ•° æ€»ç»“ä¸ºå‡½æ•°çš„æ³¨å†Œå’Œä½¿ç”¨</p></blockquote>\n<img src=\"/post/MCP/QQ_1757227390364.png\" class=\"\" title=\"img\">\n\n<h1 id=\"MCP-çš„æœ¬è´¨\"><a href=\"#MCP-çš„æœ¬è´¨\" class=\"headerlink\" title=\"MCP çš„æœ¬è´¨\"></a>MCP çš„æœ¬è´¨</h1><p>MCP å°±æ˜¯host å’Œ MCP serveräº¤äº’çš„æ ¼å¼  (jsonæ ¼å¼)  è¿™æ ·ä¸ä½¿ç”¨host åœ¨å‘½ä»¤è¡Œå¯åŠ¨MCP server è¾“å…¥ç›¸å…³çš„æ ¼å¼ å°±å¯ä»¥ä¸MCP serverè¿›è¡Œé€šä¿¡</p>\n<img src=\"/post/MCP/image-20250727154739013.png\" class=\"\" title=\"image-20250727154739013\">\n\n\n\n<p>MCP &#x3D; ä¸€ç§ã€Œé€šä¿¡åè®®  + æœ¬åœ°æ‰©å±•æœºåˆ¶ã€ã€‚</p>\n<p>MCP server &#x3D; å„ç§å„æ ·çš„å·¥å…·ï¼ˆæ–°é—»æŠ“å–ã€æ•°æ®åº“æŸ¥è¯¢ã€å‘½ä»¤è¡Œå·¥å…·â€¦ï¼‰ã€‚</p>\n<p>MCP client &#x3D; ç»Ÿä¸€çš„å…¥å£ï¼ŒæŠŠä¸åŒçš„å·¥å…·â€œæŒ‚è½½â€åˆ° AI æˆ– IDE é‡Œç”¨ã€‚</p>\n<h1 id=\"MCP-ä¸‰ç§ä¼ è¾“åè®®\"><a href=\"#MCP-ä¸‰ç§ä¼ è¾“åè®®\" class=\"headerlink\" title=\"MCP ä¸‰ç§ä¼ è¾“åè®®\"></a>MCP ä¸‰ç§ä¼ è¾“åè®®</h1><table>\n<thead>\n<tr>\n<th>åè®®åç§°</th>\n<th>é€šä¿¡æ–¹å¼</th>\n<th>é€‚ç”¨åœºæ™¯</th>\n<th>ä¼˜åŠ¿</th>\n<th>å±€é™</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>Stdio</strong>ï¼ˆæ ‡å‡†è¾“å…¥è¾“å‡ºï¼‰</td>\n<td>ä½¿ç”¨è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰å’Œæ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰è¿›è¡Œæœ¬åœ°é€šä¿¡ï¼ŒåŸºäº JSON-RPC 2.0 æ ¼å¼</td>\n<td>æœ¬åœ°å¼€å‘ã€è°ƒè¯•ã€IDE æ’ä»¶ã€å‘½ä»¤è¡Œå·¥å…·</td>\n<td>ç®€å•æ˜“å®ç°ã€è·¨å¹³å°ã€ä½å»¶è¿Ÿ</td>\n<td>ä»…æ”¯æŒæœ¬åœ°é€šä¿¡ï¼Œæ— æ³•è·¨ç½‘ç»œï¼Œä½å¹¶å‘</td>\n</tr>\n<tr>\n<td><strong>SSE</strong>ï¼ˆServer-Sent Eventsï¼‰</td>\n<td>å®¢æˆ·ç«¯é€šè¿‡ HTTP POST å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨é€šè¿‡ SSE å•å‘æ¨é€æµå¼å“åº”</td>\n<td>å®æ—¶ç›‘æ§ã€æ–°é—»æ¨é€ã€è¿œç¨‹æœåŠ¡è°ƒç”¨</td>\n<td>åŸºäº HTTPï¼Œæµè§ˆå™¨å‹å¥½ï¼Œæ”¯æŒæµå¼æ•°æ®</td>\n<td>ä»…æ”¯æŒå•å‘é€šä¿¡ï¼ŒMCP å®˜æ–¹å·²æ ‡è®°ä¸º â€œå³å°†åºŸå¼ƒâ€</td>\n</tr>\n<tr>\n<td><strong>Streamable HTTP</strong>ï¼ˆæ–°å‹æµå¼ HTTPï¼‰</td>\n<td>æ”¯æŒåŒå‘æµå¼é€šä¿¡çš„ç°ä»£ HTTP åè®®ï¼Œæ›¿ä»£ SSEï¼Œæ”¯æŒä¼šè¯æ¢å¤ã€OAuth è®¤è¯ç­‰</td>\n<td>åˆ†å¸ƒå¼ç³»ç»Ÿã€é«˜å¹¶å‘ã€åŒå‘å®æ—¶äº¤äº’</td>\n<td>åŒå‘é€šä¿¡ã€é«˜æ€§èƒ½ã€ä¼ä¸šçº§å®‰å…¨æœºåˆ¶</td>\n<td>å®ç°è¾ƒå¤æ‚ï¼Œç”Ÿæ€ä»åœ¨å‘å±•ä¸­</td>\n</tr>\n</tbody></table>\n<h1 id=\"åˆ›å»ºä¸€ä¸ªMCP-server\"><a href=\"#åˆ›å»ºä¸€ä¸ªMCP-server\" class=\"headerlink\" title=\"åˆ›å»ºä¸€ä¸ªMCP server\"></a>åˆ›å»ºä¸€ä¸ªMCP server</h1><h2 id=\"åˆå§‹åŒ–é¡¹ç›®\"><a href=\"#åˆå§‹åŒ–é¡¹ç›®\" class=\"headerlink\" title=\"åˆå§‹åŒ–é¡¹ç›®\"></a>åˆå§‹åŒ–é¡¹ç›®</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>uv init weather</p>\n<p>#è¿›å…¥weatheræ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p>\n<p>uv sync</p>\n<p>.venv\\Scripts\\activate.bat</p>\n<p>#æ·»åŠ ä¾èµ–<br>uv add â€œmcp[cli]â€ httpx</p></blockquote>\n<h2 id=\"å»ºç«‹-weather-py\"><a href=\"#å»ºç«‹-weather-py\" class=\"headerlink\" title=\"å»ºç«‹ weather.py\"></a>å»ºç«‹ weather.py</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å¯¼å…¥ç±»å‹æç¤ºæ¨¡å—ï¼Œç”¨äºç±»å‹æ³¨è§£</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> typing <span class=\"keyword\">import</span> <span class=\"type\">Any</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å¯¼å…¥httpxåº“ï¼Œç”¨äºå‘é€HTTPè¯·æ±‚</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> httpx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ä»mcp.server.fastmcpæ¨¡å—å¯¼å…¥FastMCPç±»</span></span><br><span class=\"line\"><span class=\"comment\"># FastMCPæ˜¯ä¸€ä¸ªå¿«é€Ÿæ„å»ºMCPï¼ˆModel Control Protocolï¼‰æœåŠ¡å™¨çš„æ¡†æ¶</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> mcp.server.fastmcp <span class=\"keyword\">import</span> FastMCP</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºFastMCPå®ä¾‹ï¼Œå‘½åä¸º&quot;weather&quot;ï¼Œæ—¥å¿—çº§åˆ«è®¾ç½®ä¸ºERRORï¼ˆåªæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼‰</span></span><br><span class=\"line\">mcp = FastMCP(<span class=\"string\">&quot;weather&quot;</span>, log_level=<span class=\"string\">&quot;ERROR&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å¸¸é‡å®šä¹‰</span></span><br><span class=\"line\"><span class=\"comment\"># NWSï¼ˆNational Weather Serviceï¼‰APIçš„åŸºç¡€URL</span></span><br><span class=\"line\">NWS_API_BASE = <span class=\"string\">&quot;https://api.weather.gov&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²ï¼Œç”¨äºæ ‡è¯†åº”ç”¨ç¨‹åº</span></span><br><span class=\"line\">USER_AGENT = <span class=\"string\">&quot;weather-app/1.0&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">make_nws_request</span>(<span class=\"params\">url: <span class=\"built_in\">str</span></span>) -&gt; <span class=\"built_in\">dict</span>[<span class=\"built_in\">str</span>, <span class=\"type\">Any</span>] | <span class=\"literal\">None</span>:</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;å‘NWS APIå‘èµ·è¯·æ±‚å¹¶å¤„ç†é”™è¯¯ã€‚</span></span><br><span class=\"line\"><span class=\"string\">    </span></span><br><span class=\"line\"><span class=\"string\">    Args:</span></span><br><span class=\"line\"><span class=\"string\">        url: è¦è¯·æ±‚çš„API URL</span></span><br><span class=\"line\"><span class=\"string\">        </span></span><br><span class=\"line\"><span class=\"string\">    Returns:</span></span><br><span class=\"line\"><span class=\"string\">        æˆåŠŸæ—¶è¿”å›è§£æåçš„JSONæ•°æ®å­—å…¸ï¼Œå¤±è´¥æ—¶è¿”å›None</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"comment\"># è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯</span></span><br><span class=\"line\">    headers = &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;User-Agent&quot;</span>: USER_AGENT,           <span class=\"comment\"># ç”¨æˆ·ä»£ç†æ ‡è¯†</span></span><br><span class=\"line\">        <span class=\"string\">&quot;Accept&quot;</span>: <span class=\"string\">&quot;application/geo+json&quot;</span>    <span class=\"comment\"># æ¥å—çš„æ•°æ®æ ¼å¼</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># åˆ›å»ºå¼‚æ­¥HTTPå®¢æˆ·ç«¯</span></span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> httpx.AsyncClient() <span class=\"keyword\">as</span> client:</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            <span class=\"comment\"># å‘èµ·GETè¯·æ±‚ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´ä¸º30ç§’</span></span><br><span class=\"line\">            response = <span class=\"keyword\">await</span> client.get(url, headers=headers, timeout=<span class=\"number\">30.0</span>)</span><br><span class=\"line\">            <span class=\"comment\"># å¦‚æœå“åº”çŠ¶æ€ç ä¸æ˜¯2xxï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class=\"line\">            response.raise_for_status()</span><br><span class=\"line\">            <span class=\"comment\"># è¿”å›è§£æåçš„JSONæ•°æ®</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> response.json()</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception:</span><br><span class=\"line\">            <span class=\"comment\"># æ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œè¿”å›Noneè¡¨ç¤ºè¯·æ±‚å¤±è´¥</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">None</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">format_alert</span>(<span class=\"params\">feature: <span class=\"built_in\">dict</span></span>) -&gt; <span class=\"built_in\">str</span>:</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;å°†è­¦æŠ¥æ•°æ®æ ¼å¼åŒ–ä¸ºå¯è¯»çš„å­—ç¬¦ä¸²ã€‚</span></span><br><span class=\"line\"><span class=\"string\">    </span></span><br><span class=\"line\"><span class=\"string\">    Args:</span></span><br><span class=\"line\"><span class=\"string\">        feature: åŒ…å«è­¦æŠ¥ä¿¡æ¯çš„å­—å…¸</span></span><br><span class=\"line\"><span class=\"string\">        </span></span><br><span class=\"line\"><span class=\"string\">    Returns:</span></span><br><span class=\"line\"><span class=\"string\">        æ ¼å¼åŒ–åçš„è­¦æŠ¥å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"comment\"># è·å–è­¦æŠ¥å±æ€§</span></span><br><span class=\"line\">    props = feature[<span class=\"string\">&quot;properties&quot;</span>]</span><br><span class=\"line\">    <span class=\"comment\"># æ ¼å¼åŒ–è­¦æŠ¥ä¿¡æ¯ï¼Œä½¿ç”¨getæ–¹æ³•æä¾›é»˜è®¤å€¼é˜²æ­¢é”®ä¸å­˜åœ¨</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">f&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">äº‹ä»¶: <span class=\"subst\">&#123;props.get(<span class=\"string\">&#x27;event&#x27;</span>, <span class=\"string\">&#x27;æœªçŸ¥&#x27;</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">åŒºåŸŸ: <span class=\"subst\">&#123;props.get(<span class=\"string\">&#x27;areaDesc&#x27;</span>, <span class=\"string\">&#x27;æœªçŸ¥&#x27;</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">ä¸¥é‡ç¨‹åº¦: <span class=\"subst\">&#123;props.get(<span class=\"string\">&#x27;severity&#x27;</span>, <span class=\"string\">&#x27;æœªçŸ¥&#x27;</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">æè¿°: <span class=\"subst\">&#123;props.get(<span class=\"string\">&#x27;description&#x27;</span>, <span class=\"string\">&#x27;æ— æè¿°ä¿¡æ¯&#x27;</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">æŒ‡ç¤º: <span class=\"subst\">&#123;props.get(<span class=\"string\">&#x27;instruction&#x27;</span>, <span class=\"string\">&#x27;æ— å…·ä½“æŒ‡ç¤º&#x27;</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ä½¿ç”¨@mcp.tool()è£…é¥°å™¨å°†å‡½æ•°æ³¨å†Œä¸ºMCPå·¥å…·</span></span><br><span class=\"line\"><span class=\"meta\">@mcp.tool()</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">get_alerts</span>(<span class=\"params\">state: <span class=\"built_in\">str</span></span>) -&gt; <span class=\"built_in\">str</span>:</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;è·å–æŒ‡å®šç¾å›½å·çš„å¤©æ°”è­¦æŠ¥ã€‚</span></span><br><span class=\"line\"><span class=\"string\">    </span></span><br><span class=\"line\"><span class=\"string\">    Args:</span></span><br><span class=\"line\"><span class=\"string\">        state: ä¸¤ä¸ªå­—æ¯çš„ç¾å›½å·ä»£ç ï¼ˆä¾‹å¦‚ï¼šCA, NYï¼‰</span></span><br><span class=\"line\"><span class=\"string\">        </span></span><br><span class=\"line\"><span class=\"string\">    Returns:</span></span><br><span class=\"line\"><span class=\"string\">        æ ¼å¼åŒ–åçš„è­¦æŠ¥ä¿¡æ¯å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"comment\"># æ„å»ºè·å–å·è­¦æŠ¥çš„URL</span></span><br><span class=\"line\">    url = <span class=\"string\">f&quot;<span class=\"subst\">&#123;NWS_API_BASE&#125;</span>/alerts/active/area/<span class=\"subst\">&#123;state&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"comment\"># å‘èµ·APIè¯·æ±‚è·å–æ•°æ®</span></span><br><span class=\"line\">    data = <span class=\"keyword\">await</span> make_nws_request(url)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># æ£€æŸ¥æ•°æ®æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data <span class=\"keyword\">or</span> <span class=\"string\">&quot;features&quot;</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> data:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;æ— æ³•è·å–è­¦æŠ¥æˆ–æœªæ‰¾åˆ°è­¦æŠ¥ã€‚&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># æ£€æŸ¥æ˜¯å¦æœ‰è­¦æŠ¥</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data[<span class=\"string\">&quot;features&quot;</span>]:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;è¯¥å·æ— æ´»åŠ¨è­¦æŠ¥ã€‚&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># æ ¼å¼åŒ–æ‰€æœ‰è­¦æŠ¥</span></span><br><span class=\"line\">    alerts = [format_alert(feature) <span class=\"keyword\">for</span> feature <span class=\"keyword\">in</span> data[<span class=\"string\">&quot;features&quot;</span>]]</span><br><span class=\"line\">    <span class=\"comment\"># ç”¨åˆ†éš”ç¬¦è¿æ¥æ‰€æœ‰è­¦æŠ¥</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;\\n---\\n&quot;</span>.join(alerts)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ³¨å†Œä¸ºMCPå·¥å…·çš„å¤©æ°”é¢„æŠ¥å‡½æ•°</span></span><br><span class=\"line\"><span class=\"meta\">@mcp.tool()</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">get_forecast</span>(<span class=\"params\">latitude: <span class=\"built_in\">float</span>, longitude: <span class=\"built_in\">float</span></span>) -&gt; <span class=\"built_in\">str</span>:</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;è·å–æŒ‡å®šä½ç½®çš„å¤©æ°”é¢„æŠ¥ã€‚</span></span><br><span class=\"line\"><span class=\"string\">    </span></span><br><span class=\"line\"><span class=\"string\">    Args:</span></span><br><span class=\"line\"><span class=\"string\">        latitude: ä½ç½®çš„çº¬åº¦</span></span><br><span class=\"line\"><span class=\"string\">        longitude: ä½ç½®çš„ç»åº¦</span></span><br><span class=\"line\"><span class=\"string\">        </span></span><br><span class=\"line\"><span class=\"string\">    Returns:</span></span><br><span class=\"line\"><span class=\"string\">        æ ¼å¼åŒ–åçš„å¤©æ°”é¢„æŠ¥å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"comment\"># é¦–å…ˆè·å–é¢„æŠ¥ç½‘æ ¼ç«¯ç‚¹</span></span><br><span class=\"line\">    points_url = <span class=\"string\">f&quot;<span class=\"subst\">&#123;NWS_API_BASE&#125;</span>/points/<span class=\"subst\">&#123;latitude&#125;</span>,<span class=\"subst\">&#123;longitude&#125;</span>&quot;</span></span><br><span class=\"line\">    points_data = <span class=\"keyword\">await</span> make_nws_request(points_url)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># æ£€æŸ¥ç‚¹æ•°æ®æ˜¯å¦è·å–æˆåŠŸ</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> points_data:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;æ— æ³•è·å–æ­¤ä½ç½®çš„é¢„æŠ¥æ•°æ®ã€‚&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ä»ç‚¹å“åº”ä¸­è·å–é¢„æŠ¥URL</span></span><br><span class=\"line\">    forecast_url = points_data[<span class=\"string\">&quot;properties&quot;</span>][<span class=\"string\">&quot;forecast&quot;</span>]</span><br><span class=\"line\">    forecast_data = <span class=\"keyword\">await</span> make_nws_request(forecast_url)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># æ£€æŸ¥é¢„æŠ¥æ•°æ®æ˜¯å¦è·å–æˆåŠŸ</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> forecast_data:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;æ— æ³•è·å–è¯¦ç»†é¢„æŠ¥ã€‚&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># å°†æ—¶é—´æ®µæ ¼å¼åŒ–ä¸ºå¯è¯»çš„é¢„æŠ¥</span></span><br><span class=\"line\">    periods = forecast_data[<span class=\"string\">&quot;properties&quot;</span>][<span class=\"string\">&quot;periods&quot;</span>]</span><br><span class=\"line\">    forecasts = []</span><br><span class=\"line\">    <span class=\"comment\"># åªæ˜¾ç¤ºæ¥ä¸‹æ¥çš„5ä¸ªæ—¶é—´æ®µ</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> period <span class=\"keyword\">in</span> periods[:<span class=\"number\">5</span>]:</span><br><span class=\"line\">        forecast = <span class=\"string\">f&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">&#123;period[<span class=\"string\">&#x27;name&#x27;</span>]&#125;</span>:</span></span><br><span class=\"line\"><span class=\"string\">æ¸©åº¦: <span class=\"subst\">&#123;period[<span class=\"string\">&#x27;temperature&#x27;</span>]&#125;</span>Â°<span class=\"subst\">&#123;period[<span class=\"string\">&#x27;temperatureUnit&#x27;</span>]&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">é£åŠ›: <span class=\"subst\">&#123;period[<span class=\"string\">&#x27;windSpeed&#x27;</span>]&#125;</span> <span class=\"subst\">&#123;period[<span class=\"string\">&#x27;windDirection&#x27;</span>]&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">é¢„æŠ¥: <span class=\"subst\">&#123;period[<span class=\"string\">&#x27;detailedForecast&#x27;</span>]&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\">        forecasts.append(forecast)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ç”¨åˆ†éš”ç¬¦è¿æ¥æ‰€æœ‰é¢„æŠ¥</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;\\n---\\n&quot;</span>.join(forecasts)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç¨‹åºå…¥å£ç‚¹</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    <span class=\"comment\"># åˆå§‹åŒ–å¹¶è¿è¡ŒæœåŠ¡å™¨ï¼Œä½¿ç”¨stdioä¼ è¾“æ–¹å¼</span></span><br><span class=\"line\">    mcp.run(transport=<span class=\"string\">&#x27;stdio&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>é…ç½®åˆ°clineä¸­</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;weather&quot;: &#123;</span><br><span class=\"line\">    &quot;disabled&quot;: false,</span><br><span class=\"line\">    &quot;timeout&quot;: 60,</span><br><span class=\"line\">    &quot;command&quot;: &quot;uv&quot;,</span><br><span class=\"line\">    &quot;args&quot;: [</span><br><span class=\"line\">      &quot;--directory&quot;,</span><br><span class=\"line\">      &quot;E:/MCP/weather&quot;,</span><br><span class=\"line\">      &quot;run&quot;,</span><br><span class=\"line\">      &quot;weather.py&quot;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    &quot;transportType&quot;: &quot;stdio&quot;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>â€œdisabledâ€: false è¡¨ç¤ºè¯¥æœåŠ¡æ˜¯å¦è¢«ç¦ç”¨ã€‚<code>false</code> è¡¨ç¤ºè¯¥æœåŠ¡æ˜¯å¯ç”¨çŠ¶æ€ï¼Œå¯ä»¥æ­£å¸¸è¿è¡Œã€‚</p>\n<p>â€œtimeoutâ€: 60 è®¾ç½®è¯¥æœåŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚</p>\n<p>â€œcommandâ€: â€œuvâ€ æŒ‡å®šæ‰§è¡Œè¯¥æœåŠ¡æ—¶ä½¿ç”¨çš„å‘½ä»¤ã€‚</p>\n<p>â€œargsâ€ å‡ºäº†æ‰§è¡Œ <code>command</code> æ—¶éœ€è¦ä¼ é€’çš„å‚æ•°ã€‚</p>\n<p>â€œtransportTypeâ€: â€œstdioâ€ æŒ‡å®šæœåŠ¡çš„é€šä¿¡æ–¹å¼ã€‚<code>stdio</code> è¡¨ç¤ºæ ‡å‡†è¾“å…¥è¾“å‡ºæµï¼ˆStandard Input Outputï¼‰ï¼Œé€šå¸¸ç”¨äºè¿›ç¨‹é—´é€šä¿¡ã€‚</p></blockquote>\n<p>å¤§éƒ¨åˆ†çš„MCP serveræ˜¯é€šè¿‡è¾“å…¥è¾“å‡ºä¸clineæ²Ÿé€šçš„ï¼Œå¦‚æœMCP serveræ˜¯åœ¨ç»ˆç«¯å¯åŠ¨çš„ï¼Œé‚£å¯ä»¥ç›´æ¥çœ‹åˆ°è¾“å…¥å’Œè¾“å‡ºï¼Œä½†æ˜¯ç›®å‰æ˜¯æœ‰clineå¯åŠ¨çš„ï¼Œè¾“å…¥è¾“å‡ºåªæœ‰clineæ‰èƒ½çœ‹åˆ°</p>\n<h1 id=\"ç›¸å…³èµ„æº\"><a href=\"#ç›¸å…³èµ„æº\" class=\"headerlink\" title=\"ç›¸å…³èµ„æº\"></a>ç›¸å…³èµ„æº</h1><p><a href=\"https://mcp.so/zh\">mcp.so</a></p>\n<p><a href=\"https://www.modelscope.cn/mcp\">é­”æ­MCPå¹¿åœº</a></p>\n<p><a href=\"https://sai.baidu.com/zh/\">ç™¾åº¦æœç´¢å¼€æ”¾å¹³å°</a></p>\n<p><a href=\"https://www.bilibili.com/video/BV1uronYREWR?spm_id_from=333.788.videopod.sections&vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11\">MCP bç«™è§†é¢‘</a></p>\n<p><a href=\"https://zxj-2023.github.io/2025/07/27/%E5%AD%A6%E4%B9%A0/mcp%E5%AD%A6%E4%B9%A0/MCP%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/\">MCPç¬”è®°</a></p>\n","text":"MCPFunction call ç»´åº¦ Function Callingï¼ˆFCï¼‰ MCPï¼ˆModel Context Protocolï¼‰ æœ¬è´¨ èƒ½åŠ› â€”â€” æŸä¸ª...","permalink":"/post/MCP","photos":[],"count_time":{"symbolsCount":"7.5k","symbolsTime":"7 mins."},"categories":[{"name":"AI","slug":"AI","count":2,"path":"api/categories/AI.json"}],"tags":[{"name":"MCP","slug":"MCP","count":1,"path":"api/tags/MCP.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#MCP\"><span class=\"toc-text\">MCP</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Function-call\"><span class=\"toc-text\">Function call</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#MCP%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">MCPä»‹ç»</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#MCP%E4%BA%A4%E4%BA%92%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">MCPäº¤äº’è¿‡ç¨‹</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#MCP-%E7%9A%84%E6%9C%AC%E8%B4%A8\"><span class=\"toc-text\">MCP çš„æœ¬è´¨</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#MCP-%E4%B8%89%E7%A7%8D%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE\"><span class=\"toc-text\">MCP ä¸‰ç§ä¼ è¾“åè®®</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAMCP-server\"><span class=\"toc-text\">åˆ›å»ºä¸€ä¸ªMCP server</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">åˆå§‹åŒ–é¡¹ç›®</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BB%BA%E7%AB%8B-weather-py\"><span class=\"toc-text\">å»ºç«‹ weather.py</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90\"><span class=\"toc-text\">ç›¸å…³èµ„æº</span></a></li></ol>","author":{"name":"GuoLiangWei","slug":"blog-author","avatar":"/img/logo.jpg","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>å¿ƒç…§ä¸å®£</span><span style='font-size:30px;'>ğŸ’•</span>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/github.svg","link":"https://github.com/guoliangwei2025"},"qq":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/tencentqq.svg","link":"https://wpa.qq.com/msgrd?v=3&uin=2691160140&site=qq&menu=yes"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"hot100é¢˜-å“ˆå¸Œ","uid":"fe35bb6acb69f6adf8c346c758bbeeb1","slug":"hot100é¢˜-å“ˆå¸Œ","date":"2025-08-29T01:37:39.000Z","updated":"2025-08-29T07:29:08.373Z","comments":true,"path":"api/articles/hot100é¢˜-å“ˆå¸Œ.json","keywords":"AIã€Python","cover":null,"text":"ä¸¤æ•°ä¹‹å’Œï¼ˆ1ï¼‰ ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡...","permalink":"/post/hot100é¢˜-å“ˆå¸Œ","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"hot-100é¢˜","slug":"hot-100é¢˜","count":5,"path":"api/categories/hot-100é¢˜.json"}],"tags":[{"name":"hot100-å“ˆå¸Œ","slug":"hot100-å“ˆå¸Œ","count":1,"path":"api/tags/hot100-å“ˆå¸Œ.json"}],"author":{"name":"GuoLiangWei","slug":"blog-author","avatar":"/img/logo.jpg","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>å¿ƒç…§ä¸å®£</span><span style='font-size:30px;'>ğŸ’•</span>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/github.svg","link":"https://github.com/guoliangwei2025"},"qq":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/tencentqq.svg","link":"https://wpa.qq.com/msgrd?v=3&uin=2691160140&site=qq&menu=yes"}}}}},"next_post":{"title":"pythonç›¸å…³","uid":"a8b6685f537d53566e24ad72a2e74fc5","slug":"pythonç›¸å…³","date":"2025-08-28T01:48:06.000Z","updated":"2025-08-28T06:24:25.465Z","comments":true,"path":"api/articles/pythonç›¸å…³.json","keywords":"AIã€Python","cover":null,"text":"è£…é¥°å™¨ ","permalink":"/post/pythonç›¸å…³","photos":[],"count_time":{"symbolsCount":4,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"GuoLiangWei","slug":"blog-author","avatar":"/img/logo.jpg","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>å¿ƒç…§ä¸å®£</span><span style='font-size:30px;'>ğŸ’•</span>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/github.svg","link":"https://github.com/guoliangwei2025"},"qq":{"icon":"https://cdn.jsdelivr.net/npm/simple-icons@11/icons/tencentqq.svg","link":"https://wpa.qq.com/msgrd?v=3&uin=2691160140&site=qq&menu=yes"}}}}}}